<!doctype html>
<html lang="en-US">

<head>
    <meta charset=”utf-8”> 
    <title>Nomify Login</title>
    <link rel="stylesheet" type="text/css" media="all" href="../static/login.css">  
    <link rel= "stylesheet" href= "../static/bootstrap.css" type= "text/css"/>
    <link href='http://fonts.googleapis.com/css?family=Josefin+Sans:300,400,600,700' rel='stylesheet' type='text/css'>
</head>

<script type="text/javascript">
function login()
{
    var email = document.getElementById("LoginUName").value;
    var pword = document.getElementById("LoginPWord").value;
    var xmlhttp;
    if (window.XMLHttpRequest)xmlhttp=new XMLHttpRequest();
    else xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            window.location = "/"; // Janky, but will work for now. (because the server redirects / here if you aren't logged in. ie. if login fails)
        }
    };
    xmlhttp.open('POST','login?EMail='+email+'&PWord='+pword,true);
    xmlhttp.send();
}
function resetPassword()
{
    var email = document.getElementById("ResetEMail").value;
    var xmlhttp;
    if (window.XMLHttpRequest)xmlhttp=new XMLHttpRequest();
    else xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    xmlhttp.onreadystatechange=function(){document.getElementById('LoginScreen').innerHTML=xmlhttp.responseText;}
    xmlhttp.open('POST','reset?EMail='+email,true);
    xmlhttp.send();
}
function register()
{
    var firstname = document.getElementById("RegisterFirstName").value;
    var lastname = document.getElementById("RegisterLastName").value;
    var email = document.getElementById("RegisterEMail").value;
    var pword = document.getElementById("RegisterPWord").value;
    var xmlhttp;
    if (window.XMLHttpRequest)xmlhttp=new XMLHttpRequest();
    else xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    xmlhttp.onreadystatechange=function(){document.getElementById('LoginScreen').innerHTML=xmlhttp.responseText;}
    xmlhttp.open('POST','register?FirstName='+firstname+'&LastName='+lastname+'&EMail='+email+'&PWord='+pword,true);
    xmlhttp.send();
}
</script>

<body>
    <div class="container">
        <div id="LoginScreen">
        <h1><a href="#">Nomify.</a></h1>
            <div id="SignIn">
            <form action="javascript: login()" method="get">
                <h2>Login</h2>
                <h3>Email:&nbsp;</h3><input type="email" id="LoginUName" name="LoginUName" placeholder="Email address" />
                <br/>
                <h3>Password:&nbsp;</h3><input type="password" id="LoginPWord" name="LoginPWord" placeholder="Password"/>
                <input type="submit" value="Login"/>
            </form><br>
            <form action="javascript: resetPassword()" method="get">
                <h2>Forgot your password?</h2>
                Email address:&nbsp;<input type="email" id="ResetEMail" name="ResetEMail" placeholder="Email address" />&nbsp;&nbsp;<input type="submit" value="Reset" />
            </form>
            </div>
            <div id="SignUp">
            <form action="javascript: register()" method="get">
                <h2>Register new user:</h2><br>
                    <h3>First Name:&nbsp;</h3><input type="text" id="RegisterFirstName" name="RegisterFirstName" placeholder="First Name" />
                    <br/>
                    <h3>Last Name:&nbsp;</h3><input type="text" id="RegisterLastName" name="RegisterLastName" placeholder="Last Name" />
                    <br/>
                    <h3>Email:&nbsp;</h3><input type="email" id="RegisterEMail" name="RegisterEMail" placeholder="email address" />
                    <br/>
                    <h3>Password:&nbsp;</h3><input type="password" id="RegisterPWord" name="RegisterPWord" placeholder="Password" />
                <input type="submit" value="Register"/>
            </form>
            </div>
        </div>
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src= "../static/js/bootstrap.js"></script>
</body>